<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>é™¢æ ¡ç®¡ç†</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="/static/css/university.css">

    <link rel="stylesheet" href="/static/css/font.css">
    <link rel="stylesheet" href="/static/css/xadmin.css">
    <script src="/static/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/static/js/xadmin.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script>
</head>
<body>
<div id="app">
    <div class="x-nav">
      <span class="layui-breadcrumb">
        <a href="">é¦–é¡µ</a>
        <a href="">æ¼”ç¤º</a>
        <a>
          <cite>å¯¼èˆªå…ƒç´ </cite></a>
      </span>
        <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right"
           href="javascript:location.replace(location.href);" title="åˆ·æ–°">
            <i class="layui-icon" style="line-height:30px">á€‚</i></a>
    </div>
    <div class="layui-row">
        <form class="layui-form layui-col-md12 x-so">
            <input class="layui-input" placeholder="å¼€å§‹æ—¥" name="start" id="start">
            <input class="layui-input" placeholder="æˆªæ­¢æ—¥" name="end" id="end">
            <input type="text" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" autocomplete="off" class="layui-input">
            <button class="layui-btn" lay-submit="" lay-filter="sreach"><i class="layui-icon">&#xe615;</i></button>
        </form>
    </div>
    <xblock>
        <button class="layui-btn layui-btn-danger" onclick="delAll()"><i class="layui-icon">î™€</i>æ‰¹é‡åˆ é™¤</button>
        <button class="layui-btn"
                onclick="x_admin_show('Add_Book','${pageContext.request.contextPath}/admin/index?m=addBookView')"><i
                class="layui-icon">î˜ˆ</i>æ·»åŠ 
        </button>
        <span class="x-right" style="line-height:40px">å…±æœ‰æ•°æ®ï¼š{{ count }} æ¡</span>
    </xblock>
    <table class="layui-table">
        <thead>
        <tr>
            <th>
                <div>
                    <input type="checkbox" :input="checkAll(isAllChecked)" :value="isAllChecked">
                </div>
            </th>
            <th v-for="th in ths">{{ th }}</th>
            <th>è¯¦æƒ…</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="(item,index) in universities" v-if="universities != null && universities.length != 0">
            <td>
                <div>
                    <input type="checkbox" name="idList" @click="addId(index)">
                </div>
            </td>
            <td>{{ item.id }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.isYJSY }}</td>
            <td>{{ item.isZHX }}</td>
            <td>
                <button @click="showDetail(item)">è¯¦æƒ…æŒ‰é’®</button>
            </td>
        </tr>
        <div v-else>
            æš‚æ— æ•°æ®
        </div>
        </tbody>
    </table>
    <div :class="detailModalClass">
        <div>
            <!--æ•°æ®åŒº-->
            <div v-if="curItem != null">
                <div>
                    <label>{{ cols[0] }}</label>
                    <p>{{ curItem.id }}</p>
                </div>
                <div>
                    <label>{{ cols[1] }}</label>
                    <p>{{ curItem.name }}</p>
                </div>
            </div>
            <div v-else>
                æœªé€‰ä¸­æ•°æ® ğŸ˜¢
            </div>
            <!--æŒ‰é’®åŒº-->
            <div>
                <button @click="hideDetail">å…³é—­</button>
                <!--                <button @click="modified(curItem)">ä¿å­˜</button>-->
            </div>
        </div>
    </div>
    <!--åˆ†é¡µæ¡-->
    <div class="page">
        <div>
            <!--ä¸Šä¸€é¡µ-->
            <a class="prev" href="#"
               @click="fetchUniversityPage(pageBar.prePageIndex, 5)" :style="">&lt;&lt;</a>
            <!--æ˜¾ç¤ºçš„åˆ†é¡µç´¢å¼•-->
            <a v-for="item in pageBar.declaredIndexList"
               href="#"
               @click="fetchUniversityPage(item, 5)">
                {{ item }}
            </a>
            <!--ä¸‹ä¸€é¡µ-->
            <a class="next" href="#"
               @click="fetchUniversityPage(pageBar.nextPageIndex, 5)" :disabled="pageBar.curPageIndex == 1">&gt;&gt;</a>
        </div>
    </div>
</div>
<script>
    new Vue({
        el: "#app",
        data: function () {
            return {
                count: 100,
                cols: ['uid', 'é™¢æ ¡å', 'æ˜¯å¦æ˜¯ç ”ç©¶ç”Ÿé™¢', 'æ˜¯å¦è‡ªåˆ’çº¿é™¢æ ¡', 'æ’å', 'å®˜æ–¹ç½‘å€', 'è¯¥é™¢æ ¡æ‰€åœ¨åŸå¸‚'],
                pageBar: {},
                universities: [],
                index: 0,
                curItem: {},
                flag: false,
                detailModalClass: {
                    "modal-hide": true,
                    "modal-show": false,
                },
                isAllChecked: false,
                idList: [],
            }
        },
        computed: {
            ths: function () {
                return this.cols.slice(0, 4)
            },
            idList: function () {
                for (let i = 0; i < this.universities.length; i++) {
                    this.idList[i] = false;
                }
            }
        },
        watch: {},
        methods: {
            // to backend methods
            fetchUniversityPage(pageIndex, pageSize) {
                $.ajax({
                    url: '/api/v2.1/university/page?' + "pageIndex=" + pageIndex + "&" + "pageSize=" + pageSize,
                    type: 'GET',
                    dataType: 'json',
                    timeout: 1000,
                    cache: false,
                    beforeSend: LoadFunction1, //åŠ è½½æ‰§è¡Œæ–¹æ³•
                    error: erryFunction1,  //é”™è¯¯æ‰§è¡Œæ–¹æ³•
                    success: (tt) => {
                        var json = eval(tt); //æ•°ç»„
                        var tt = "";
                        this.universities = json.data.pageContentInfo.data;
                        this.pageBar = json.data.pageBar;
                    }
                })

                function LoadFunction1() {
                    // $("#list3").html('åŠ è½½ä¸­...');
                }

                function erryFunction1() {
                    alert("error");
                }
            },

            // basic javascript methods
            showDetail: function (item) {
                this.curItem = item;
                this.detailModalClass["modal-show"] = true;
                this.detailModalClass["modal-hide"] = false;
            },
            hideDetail: function () {
                this.curItem = null;
                this.detailModalClass["modal-show"] = false;
                this.detailModalClass["modal-hide"] = true;
            },
            checkAll(isAllChecked) {
                console.log(isAllChecked);
            },
            addId(id) {
                this.idList.push()
            },
        },
        created: function () {
            this.fetchUniversityPage(1, 5);
        },
        mounted: function () {

        }
    });
</script>
</body>
<style>
</style>
</html>